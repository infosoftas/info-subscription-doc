.. _changelog-r118:

*************************
Release October 31st 2023
*************************

Only a 3 week release cycle this time around, mostly because the previous release was a bit delayed. 
Just a few items in this release, mainly regular maintenance and small improvements, but a few quality of life improvements for Merchant and Billing has been included as well.


API and Backend
===============
The following new fixes, features and improvements are now available in the API and the backend.

Added
-----

* OpenAPI/Swagger specification now include security information on all endpoints requiring it. Previously only a global declaration and a few exemptions were present.
* OpenAPI/Swagger specification now includes default responses for most endpoints. This to ensure better compatibility with code generation tools.
* A new external event type `SubscriptionDeactivated` is now available, it triggers when the subscription actually expires. Refer to the event documentation for more details.
* Support for manually deactivating a |Vipps| recurring agreement. Specifically removes the subscription in the Vipps app.
* Automatic de-activation of |Vipps| recurring payment agreements when the abstract Payment Agreement is deactivated or deleted. See previous item.
* Billing Account Transactions now contains a property `IncludedInLedger` defining if it already mirrored in the Subscriber Ledger or not. This property is also present when creating/generating account transactions.

Changed
-------

* EHF serialization process re-implemented. Will be rolled out on tenants progressively.
* Invoice Documents now group tax totals. Simplifies generation of third party invoices such as PDFs, Emails, |eFaktura| and EHF.
* Manually crediting Payment Demands will now revert account transactions to the billing account where they originated. Mainly to ensure allowances/additional payments are not written off, without explicit declaration.
* Generation of reminders will now only consume allowances generated by payments and not arbitrary allowances.

Deprecated
----------
We call out the following deprecations, the endpoints/field will be removed in a future version, the exact timing depending on existing use and adoption of replacements.

* We are deprecating the endpoints ``/paymentdemand/{id}/credit/completely`` and ``/paymentdemand/{id}/credit/partially`` in favor of ``/paymentdemand/{id}/credit`` endpoint.
* We are deprecating the field ``TaxPercentage`` on the endpoint for creating Account Payment Demand transaction ``POST /paymentdemand/``, in favour of specifying a list of Tax Details.


Merchant Client
===============
The following new features and improvements are now available in the merchant client.

Added
-----

* New view for bulk registration of Subscribers and Subscriptions for Enterprise Plans.

Fixed
-----

* Registration of subscriptions on Enterprise Plans, now only show subscription plans that matches the billing alignment of the selected Enterprise Plan.
* Translations on Payment Agreement details in Norwegian.
* An issue where it was possible to add prices with an invalid start time.

Changed
-------

* Removed option for adding an Invoice Contact when registering subscriptions on an Enterprise Plan.
* Reworked the Enterprise Plan details view with new grid components, and adjusted filtering options and placement order.


Self-Service and Sales Poster
=============================
The following new features and improvements are now available in the self-service client

Fixed
-----

* An issue where it was impossible to remove Organization Number and Invoice Reference on a subscriber contact.