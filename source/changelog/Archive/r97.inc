.. _changelog-r97:

****************************
Release January 16th 2022
****************************
Happy new year, the first release of 2022 started rolling out on the 16th.
The API has been rolled out, and tenant clients are being rolled out over the next few days.
Due to the holiday season, the release is a bit delayed compared to the previous ones, but not by much.


API and Backend
===============
The following new features and improvements are now available in the API and the backend.

* Added an order monitor/observer process for orders using Vipps. This monitor will attempt to automatically complete Vipps orders where the user has somehow lost browser connection or closed the browser, but still accepted the Vipps Agreement in the Mobile App.
* Added an option to configure subscription plans with fixed/eternal discounts.
* The API for Payment Demands now includes a reference to the originating Payment Agreement.
* The InvoiceIssued events now always includes the SubscriberId, previously the field was there but never populated.
* Fixed multiple issue where there would be double credit and charge ledger transactions generated by the billing engine.
* AvtaleGiro Mandates that are cancelled will now lead to a deactivation of the Payment Agreement instead of a deletion. Done to keep track of outstanding claims and payment history in a consistent manner.
* Fixed an issue where invoice drafts would have multiple lines, for instance when scheduling subscription plan changes.
* When a scheduled subscription cancellation is removed (cancelled), a new payment demand will be generated. This new demand cannot be guaranteed to follow the same deadlines as a regular demand, since the cancellation may be removed at a very late stage in the subscription lifecycle. This means the subscriber may end up in a debt scenario for a short amount of time, until the invoice is paid.
* Fixed an issue in the reporting subsystem where reminder Fees were not handled properly.
* Vipps Agreement creation will now re-verify agreement existence before importing the agreement, and respond with an error if not valid. This was added to avoid an issue where it was possible to force import an agreement without it being accepted by the end user. This could happen by a badly designed sales process for instance.

Merchant Client
===============
The following new features and improvements are now available in the merchant client.

* Fixed an issue that would lead to errors when editing a chain on an existing template plan.
* Adjusted the Economic Journal to show all ledger transactions.
* When Subscription Contracts are enabled it was previously impossible to update a Subscription Plan without specifying a new Billing Frequency. This issue has now been fixed.

Self-Service and Salesposter
============================
The following new features and improvements are now available in the self-service client

* Fixed an issue with Kilkaya convertions **Preview**.
* Fixed an issue where adding shared users would not work as intended.
